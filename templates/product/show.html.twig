{% extends "base.html.twig" %}

{% block body %}

    <h2 id="date">{{ "now"|date("j/m", "Europe/Paris") }}</h2>
    {% block menu %}
        <div id="menu">
                <nav>
                    <h2>Dayliz</h2>
                    <a href="{{ path('all_product') }}" class="btn-category" ><h3><img src="{{ asset('vendor/img/home-icon-silhouette.png') }}" class="ico">Toutes les catégories</h3></a>
                    {% for category in category %}
                        <a href="{{ path('product_by_category', {'id': category.getId()}) }}" class="btn-category"><h3><img src="{{ asset('vendor/img/light-bulb.png') }}" class="ico">{{ category.name }}</h3></a>
                    {% endfor %}
                    <a href="{{ path('interest', {'id': app.user.id}) }}" class="btn-category"><h3><img src="{{ asset('vendor/img/favorite.png') }}" class="ico">Ajouter centre d'interet</h3></a>
                    <a href="{{ path('app_logout') }}" class="btn-category"><h3><img src="{{ asset('vendor/img/log-out.png') }}" class="ico">Logout</h3></a>
                </nav>
        </div>

    {% endblock %}

    <div id="wall">

            {% for product in product %}
                <button class="ajax">like</button>
                <div class="product">
                    <h3 id="name-p">{{ product.name }}</h3>
                    <img src="{{ product.image }}" class="img-product"/>
                    <p id="mark-p">De : {{ product.markid.getName() }}</p>
                    <p id="describe-p">{{ product.describe }}</p>
                    <a href="{{ product.link }}" id="btn-product">ça m'interesse</a>
                </div>
            {% endfor %}

    </div>

    <script>
        $(document).on('click', 'button.ajax', function(){
            that = $(this);
            $.ajax({
                url:'{{ (path('like')) }}',
                type: "POST",
                dataType: "json",
                data: {
                    "user_id": {{ app.user.id }},
                    "product_id": {{ product.getId() }}
                },
                async: true,
                success: function (data)
                {

                }
            });
            return false;

        });
    </script>
{% endblock %}

